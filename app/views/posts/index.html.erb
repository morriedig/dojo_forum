<h1>This is post index</h1>

<%= link_to "新增貼文", new_post_path%>

<ul class="nav nav-tabs ntu-nav-tabs justify-content-center all_post_category" id="contr-tab" role="tablist">
  <li class="nav-item">
      <a class="nav-link active" id="post_category-all-tab" data-toggle="tab" href="#all" role="tab" aria-controls="all" aria-selected="true">
          全部
      </a>
  </li>
  <% @post_categories.each do |post_category| %>
      <li class="nav-item">
      <a class="nav-link" id="post_category-<%= post_category.id %>-tab" data-toggle="tab" href="#post<%= post_category.id %>" role="tab" aria-controls="post_category<%= post_category.id %>" aria-selected="false">
          <%= post_category.title %>
      </a>
  </li>
  <% end %>
</ul>
    <div class="tab-pane fade show active" id="all" role="tabpanel" aria-labelledby="post_category-all-tab">
        <div class="mt-4 mb-4">
            <div class="row">
                <% @posts.each do |post| %>
                    <%= render :partial => "posts/post_list", locals: {post: post} %>
                <% end %>
            </div>
            <%= paginate @posts, remote: true %>
        </div>
    </div>

<% @post_categories.each do |post_category| %>
    <div class="tab-pane fade" id="post<%= post_category.id %>" role="tabpanel" aria-labelledby="post_category-<%= post_category.id %>-tab">
        <div class="mt-4 mb-4">
            <div class="row">
            <%# 動態新增區域 %>
                <% instance_variable_get("@post#{post_category.id}").each do |post| %>
                    <%= render :partial => "posts/post_list", locals: {post: post} %>
                <% end %>
            </div>
            <%= paginate instance_variable_get("@post#{post_category.id}"), remote: true,params: { category_id: post_category.id } %>
        </div>
    </div>
<% end %>




